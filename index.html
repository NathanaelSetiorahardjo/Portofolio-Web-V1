<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>Nathanael Setiorahardjo | Software Engineer</title>
    <meta name="description" content="Personal portfolio of Nathanael Setiorahardjo, an aspiring Software Engineer, Developer, and CS Student specializing in web development and data analysis.">
    
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='15' fill='%233b82f6'%3E%3C/rect%3E%3Ctext x='50' y='55' font-family='Arial, sans-serif' font-size='50' fill='white' text-anchor='middle' dominant-baseline='middle' font-weight='bold'%3ENS%3C/text%3E%3C/svg%3E">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* --- RESET & VARIABLES --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-bg: #fafafa;
            --secondary-bg: #ffffff;
            --text-primary: #1a1a1a;
            --text-secondary: #666666;
            --border-color: rgba(0, 0, 0, 0.08);
            --shadow-light: rgba(0, 0, 0, 0.04);
            --shadow-medium: rgba(0, 0, 0, 0.1);
            --gradient-primary: linear-gradient(135deg, #0ea5e9 0%, #3b82f6 50%, #1d4ed8 100%);
            --accent-color: #3b82f6;
            --shape-color: rgba(59, 130, 246, 0.08);
        }

        [data-theme="dark"] {
            --primary-bg: #0f0f0f;
            --secondary-bg: #1a1a1a;
            --text-primary: #ffffff;
            --text-secondary: #a1a1aa;
            --border-color: rgba(255, 255, 255, 0.08);
            --shadow-light: rgba(0, 0, 0, 0.3);
            --shadow-medium: rgba(0, 0, 0, 0.5);
            --shape-color: rgba(96, 165, 250, 0.18);
        }

        html { 
            scroll-behavior: smooth; 
            overflow-x: hidden; /* CRITICAL FIX: Stops horizontal scroll */
            width: 100%;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--primary-bg);
            color: var(--text-primary);
            line-height: 1.6;
            width: 100%;
            overflow-x: hidden; /* CRITICAL FIX: Double protection */
            position: relative;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        body.no-scroll { overflow: hidden; }

        /* --- BACKGROUND ANIMATION --- */
        .animated-shapes {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            overflow: hidden; z-index: -1; pointer-events: none;
        }
        .shape {
            position: absolute; background-color: var(--shape-color); border-radius: 50%;
            opacity: 0.6; animation: moveShape 20s infinite ease-in-out alternate;
        }
        .shape.square { border-radius: 0; }
        .shape.triangle {
            width: 0; height: 0; background-color: transparent; border-left: 30px solid transparent;
            border-right: 30px solid transparent; border-bottom: 50px solid var(--shape-color);
            animation: moveShape 25s infinite ease-in-out alternate;
        }
        @keyframes moveShape {
            0% { transform: translate(0, 0) rotate(0deg) scale(1); }
            100% { transform: translate(60vw, 80vh) rotate(360deg) scale(1.2); }
        }
        
        /* --- NAVIGATION --- */
        nav {
            position: fixed; top: 0; left: 0; right: 0;
            width: 100vw; /* Ensures full viewport width */
            background: rgba(250, 250, 250, 0.95);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            z-index: 1000; padding: 1rem 2rem;
            border-bottom: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        [data-theme="dark"] nav { background: rgba(15, 15, 15, 0.95); }
        
        nav.scrolled {
            background: rgba(250, 250, 250, 0.98);
            box-shadow: 0 4px 30px var(--shadow-light);
        }
        [data-theme="dark"] nav.scrolled { background: rgba(15, 15, 15, 0.98); }

        nav.nav-hidden { transform: translateY(-100%); }

        .nav-container { 
            max-width: 1200px; 
            margin: 0 auto; 
            width: 100%;
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
        }
        
        .nav-brand {
            font-weight: 700; font-size: 1.4rem; color: var(--text-primary);
            text-decoration: none; display: flex; align-items: center;
            gap: 0.5rem; transition: all 0.3s ease; z-index: 1002;
        }
        .logo-container { position: relative; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; }
        .logo-circle {
            position: absolute; width: 40px; height: 40px; background: var(--gradient-primary); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3); transition: all 0.3s ease;
        }
        .logo-text { font-size: 16px; font-weight: 900; color: white; letter-spacing: -1px; }
        .brand-text {
            background: var(--gradient-primary); -webkit-background-clip: text;
            -webkit-text-fill-color: transparent; background-clip: text; font-weight: 700;
        }

        .nav-links { display: flex; gap: 2rem; list-style: none; }
        .nav-links a {
            text-decoration: none; color: var(--text-primary); font-weight: 500; font-size: 0.95rem;
            position: relative; padding: 0.5rem 1rem; border-radius: 8px; transition: all 0.3s ease;
        }
        .nav-links a::after {
            content: ''; position: absolute; bottom: 0; left: 50%; width: 0; height: 2px;
            background: var(--gradient-primary); transition: all 0.3s ease; transform: translateX(-50%);
        }
        .nav-links a:hover::after, .nav-links a.active::after { width: 80%; }
        .nav-links a:hover, .nav-links a.active {
            background: rgba(59, 130, 246, 0.05); color: var(--accent-color); transform: translateY(-2px);
        }

        .nav-tools { display: flex; align-items: center; gap: 1rem; z-index: 1002; }
        
        .nav-toggle { 
            display: none; background: none; border: none; font-size: 1.5rem;
            color: var(--text-primary); cursor: pointer; padding: 0.5rem; 
            border-radius: 8px; transition: all 0.3s ease; 
        }
        
        /* Theme Toggle */
        .theme-toggle { background: none; border: none; cursor: pointer; padding: 0; }
        .toggle-switch {
            position: relative; width: 60px; height: 30px; background: #e5e5e5; border-radius: 30px;
            transition: all 0.3s ease; box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        [data-theme="dark"] .toggle-switch { background: #374151; }
        .toggle-slider {
            position: absolute; top: 3px; left: 3px; width: 24px; height: 24px;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            border-radius: 50%; transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }
        [data-theme="dark"] .toggle-slider { transform: translateX(30px); background: linear-gradient(135deg, #e5e7eb 0%, #ffffff 100%); }

        /* --- HERO SECTION --- */
        .hero { min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 2rem; padding-top: 80px; }
        .hero-content { text-align: center; max-width: 800px; width: 100%; }
        .hero-title {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 700;
            margin-bottom: 1rem;
            line-height: 1.4;
            /* CRITICAL FIX: Breaks long names on small screens */
            word-wrap: break-word; 
            overflow-wrap: break-word;
        }
        .hero-subtitle {
             font-size: clamp(1rem, 2.5vw, 1.4rem); color: var(--text-secondary); margin-bottom: 2rem; 
             opacity: 1;
        }
        
        @keyframes gradient-pan {
            0% { background-position: 0% center; }
            50% { background-position: 100% center; }
            100% { background-position: 0% center; }
        }

        /* --- Name Animation --- */
        .ml11 { font-weight: 700; position: relative; }
        .ml11 .text-wrapper { position: relative; display: inline-block; padding-top: 0.1em; padding-right: 0.05em; padding-bottom: 0.15em; }
        .ml11 .line {
            opacity: 0; position: absolute; left: 0; height: 100%; width: 3px;
            background-color: var(--accent-color); transform-origin: 0 50%;
        }
        .ml11 .line1 { top: 0; left: 0; }
        .ml11 .letters {
            display: inline-block;
            background: var(--gradient-primary); background-size: 200% 200%;
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            animation: gradient-pan 3s ease-in-out infinite;
        }
        .ml11 .letter { display: inline-block; line-height: 1em; }

        /* --- GENERAL SECTIONS --- */
        .section { padding: 6rem 1.5rem; position: relative; } /* Reduced padding for mobile safety */
        .about { background: var(--secondary-bg); border-top: 1px solid var(--border-color); }
        .container { max-width: 1200px; margin: 0 auto; width: 100%; }
        .section-title {
            font-size: clamp(2rem, 4vw, 3rem); font-weight: 700; text-align: center;
            margin-bottom: 3rem; opacity: 0; transform: translateY(30px); transition: all 0.6s ease;
        }
        .section-title.visible { opacity: 1; transform: translateY(0); }
        
        /* --- ABOUT --- */
        .about-grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 4rem; 
            align-items: center; 
            max-width: 1000px; 
            margin: 0 auto; 
        }
        .about-image-container { text-align: center; opacity: 0; transform: translateY(20px); transition: all 0.6s ease 0.2s; }
        .about-image-container.visible { opacity: 1; transform: translateY(0); }
        .about-profile-image {
            width: 250px; height: 250px; border-radius: 50%; object-fit: cover;
            border: 4px solid white; box-shadow: 0 10px 30px var(--shadow-medium);
            transition: transform 0.3s ease;
        }
        .about-profile-image:hover { transform: scale(1.05); }
        .about-content-text { font-size: 1.15rem; color: var(--text-secondary); opacity: 0; transform: translateY(20px); transition: all 0.6s ease 0.4s; }
        .about-content-text.visible { opacity: 1; transform: translateY(0); }
        
        /* --- PROJECTS (WORK) --- */
        .work-categories { display: flex; justify-content: center; gap: 1rem; margin-bottom: 4rem; flex-wrap: wrap; }
        .category-btn {
            padding: 0.75rem 1.5rem; background: var(--secondary-bg); border: 2px solid var(--border-color);
            border-radius: 30px; color: var(--text-primary); text-decoration: none;
            font-weight: 500; transition: all 0.3s ease; cursor: pointer; font-family: inherit; font-size: 0.95rem;
        }
        .category-btn.active {
            color: white; border-color: transparent; background: var(--gradient-primary);
            transform: translateY(-2px); box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
        }
        /* CRITICAL FIX: minmax changed from 300px to 260px to fit iPhone SE/Small Androids */
        .work-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 2rem; }
        
        .work-item {
            background: var(--secondary-bg); border-radius: 20px; border: 1px solid var(--border-color);
            transition: all 0.4s ease; cursor: pointer; display: flex; flex-direction: column;
            opacity: 0; transform: translateY(20px); animation: projectFadeIn 0.5s ease forwards;
        }
        @keyframes projectFadeIn { to { opacity: 1; transform: translateY(0); } }
        [style*="animation-delay"] { transform: translateY(20px); }
        .work-item:hover { transform: translateY(-8px); box-shadow: 0 20px 40px var(--shadow-light); border-color: rgba(59, 130, 246, 0.3); }
        .work-image { width: 100%; height: 220px; object-fit: cover; border-radius: 20px 20px 0 0; background-color: #e0e0e0; }
        .work-content { padding: 1.75rem; flex-grow: 1; display: flex; flex-direction: column; }
        .work-content h3 {
            margin-bottom: 0.5rem; background: var(--gradient-primary);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            background-size: 200% 200%; animation: gradient-pan 3s ease-in-out infinite;
            display: inline-block; font-size: 1.25rem;
        }
        .work-content p { color: var(--text-secondary); margin-bottom: 1.5rem; font-size: 0.95rem; flex-grow: 1;}
        .tech-tags { display: flex; flex-wrap: wrap; gap: 0.5rem; }
        .tech-tag { padding: 0.25rem 0.75rem; background: rgba(59, 130, 246, 0.1); color: var(--accent-color); border-radius: 15px; font-size: 0.8rem; font-weight: 500; }
        
        /* --- COMMUNITY --- */
        .community { background: var(--primary-bg); }
        /* CRITICAL FIX: minmax to 260px here too */
        .community-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 2rem; max-width: 1000px; margin: 0 auto;
        }
        .community-card {
            background: var(--secondary-bg); border: 1px solid var(--border-color);
            border-radius: 20px; padding: 2rem; text-align: center;
            transition: all 0.4s ease; opacity: 0; transform: translateY(20px);
        }
        .community-card.visible { opacity: 1; transform: translateY(0); }
        .community-card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px var(--shadow-light); }
        .community-card__icon { font-size: 2.5rem; color: var(--accent-color); margin-bottom: 1rem; }
        .community-card h3 { font-size: 1.35rem; margin-bottom: 0.75rem; color: var(--text-primary); }
        .community-card p { color: var(--text-secondary); font-size: 0.95rem; }

        /* --- TECH STACK --- */
        .tech-stack { background: var(--secondary-bg); }
        .tech-icons { display: flex; justify-content: center; align-items: center; gap: 2.5rem; flex-wrap: wrap; max-width: 900px; margin: 0 auto 3rem; }
        .tech-icon, .text-icon, .custom-tech-icon { 
            font-size: 3.5rem; color: var(--text-secondary); transition: all 0.3s ease; 
            opacity: 0; 
        }
        .tech-icon:hover, .text-icon:hover, .custom-tech-icon:hover { color: var(--accent-color); transform: scale(1.15); fill: var(--accent-color); }
        .text-icon { font-family: 'Courier New', Courier, monospace; font-size: 2.2rem; font-weight: 700; display: inline-flex; align-items: center; justify-content: center; width: 48px; height: 48px; cursor: default; }
        .custom-tech-icon { width: 48px; height: 48px; fill: var(--text-secondary); }
        .tech-text { text-align: center; font-size: 1.1rem; color: var(--text-secondary); }

        /* --- SOCIALS --- */
        .socials { text-align: center; }
        .social-buttons { display: flex; justify-content: center; gap: 1.5rem; margin-bottom: 3rem; flex-wrap: wrap; }
        .social-btn {
            padding: 1rem 2rem; background: var(--secondary-bg); border: 2px solid var(--border-color);
            border-radius: 50px; color: var(--text-primary); text-decoration: none; font-weight: 500;
            transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 0.75rem;
            opacity: 0;
        }
        .social-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 25px var(--shadow-light); border-color: var(--accent-color); color: var(--accent-color); }
        .social-icon { font-size: 1.2rem; }
        .btn {
            padding: 0.75rem 2rem; background: var(--gradient-primary); color: white; text-decoration: none; border: none; border-radius: 25px; font-size: 1.05rem;
            cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 0.5rem; font-weight: 600;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3); }

        /* --- FOOTER & SCROLLBAR --- */
        footer { background: var(--text-primary); color: var(--primary-bg); padding: 3rem 2rem; text-align: center; }
        .scroll-indicator { position: fixed; top: 0; left: 0; width: 100%; height: 3px; background: transparent; z-index: 1001; }
        .scroll-progress { height: 100%; background: var(--gradient-primary); width: 0%; transition: width 0.05s linear; }
        
        .hero-subtitle .letter {
            display: inline-block; opacity: 0; transform: translateY(20px);
        }

        /* --- CASE STUDY MODAL --- */
        .case-study-view {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--primary-bg); 
            z-index: 5000; overflow-y: auto;
            transform: translateY(100%); visibility: hidden;
            pointer-events: none; 
            -webkit-overflow-scrolling: touch; 
        }
        .case-study-view.active { 
            visibility: visible; 
            pointer-events: auto;
        }

        .case-study__close-btn {
            position: fixed; top: 2rem; right: 2rem; font-size: 0.9rem; font-weight: 600;
            text-decoration: none; z-index: 5001;
            padding: 0.75rem 1.5rem; border-radius: 50px;
            background: var(--secondary-bg); color: var(--text-primary); border: 1px solid var(--border-color);
            box-shadow: 0 5px 15px var(--shadow-light); transition: all 0.3s ease;
        }
        .case-study__close-btn:hover { 
            transform: translateY(-2px); box-shadow: 0 8px 25px var(--shadow-light);
            color: var(--accent-color); border-color: var(--accent-color);
        }
        
        .case-study__hero {
            height: 45vh; background-size: cover; background-position: center;
            display: flex; align-items: flex-end; justify-content: center;
            padding: 3rem 2rem; position: relative; box-shadow: 0 10px 40px var(--shadow-light);
            overflow: hidden;
        }
        .case-study__hero::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: inherit; filter: blur(12px) brightness(0.7); z-index: 1; transform: scale(1.1);
        }
        
        .case-study__hero h1 {
            font-size: clamp(2rem, 5vw, 4rem); font-weight: 700; text-align: center;
            position: relative; z-index: 2; margin-bottom: 2rem;
            background: none; color: white; text-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }
        .case-study__hero h1 .letters {
            background: none; -webkit-text-fill-color: white; 
        }

        .case-study__content { 
            padding: 3rem 2rem 5rem 2rem; max-width: 900px; margin: -5rem auto 0 auto; 
            background: var(--secondary-bg); border-radius: 20px; border: 1px solid var(--border-color);
            position: relative; z-index: 10; box-shadow: 0 20px 50px var(--shadow-light);
        }

        /* --- PROJECT LINKS STYLES --- */
        .case-study__links {
            display: flex; gap: 1rem; margin-bottom: 2.5rem; flex-wrap: wrap; justify-content: center;
        }
        
        .case-study__link {
            display: inline-flex; align-items: center; gap: 0.5rem;
            padding: 0.75rem 1.5rem; border-radius: 50px;
            text-decoration: none; font-weight: 500; transition: all 0.3s ease; font-size: 0.95rem;
        }
        
        .demo-link {
            background: var(--gradient-primary); color: white; box-shadow: 0 4px 15px var(--shadow-light); border: 2px solid transparent;
        }
        .demo-link:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4); }
        
        .repo-link { background: transparent; color: var(--text-primary); border: 2px solid var(--border-color); }
        .repo-link:hover { border-color: var(--text-primary); background: var(--text-primary); color: var(--primary-bg); transform: translateY(-2px); }

        .case-study__meta { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem; margin-bottom: 3rem; padding-bottom: 2rem; border-bottom: 1px solid var(--border-color);
        }
        .case-study__meta-item h3 { 
            color: var(--text-secondary); font-size: 0.85rem; font-weight: 700;
            letter-spacing: 1px; margin-bottom: 0.5rem; text-transform: uppercase;
        }
        .case-study__meta-item p { font-size: 1.1rem; font-weight: 500; color: var(--text-primary); }

        .case-study__section { margin-bottom: 3rem; }
        .case-study__section h2 { 
            font-size: 1.8rem; margin-bottom: 1.5rem; position: relative; padding-bottom: 0.5rem; color: var(--text-primary);
        }
        .case-study__section h2::after {
            content: ''; position: absolute; bottom: 0; left: 0; width: 50px; height: 3px; background: var(--gradient-primary);
        }

        .case-study__section p { 
            color: var(--text-secondary); font-size: 1.1rem; line-height: 1.8; 
        }
        .case-study__full-image { 
            width: 100%; border-radius: 12px; margin: 2rem 0; 
            border: 1px solid var(--border-color); box-shadow: 0 10px 30px var(--shadow-light);
        }

        /* --- MEDIA QUERIES (RESPONSIVENESS) --- */
        @media (max-width: 1024px) {
            .hero-title { font-size: 3.5rem; }
            .section { padding: 6rem 2rem; }
        }

        @media (max-width: 768px) {
            /* FIXED: Reduce padding to prevent overflow */
            nav { padding: 1rem 1.5rem; }
            .nav-toggle { display: block; }
            .brand-text { display: none; } 
            
            .nav-links {
                position: fixed; top: 0; left: 0; width: 100%; height: 100vh; 
                background: var(--secondary-bg); /* Ensuring solid bg */
                flex-direction: column; align-items: center; justify-content: center; gap: 2rem;
                transform: translateX(100%); opacity: 0; transition: all 0.3s cubic-bezier(0.76, 0, 0.24, 1);
                padding-bottom: 4rem; z-index: 1000;
                box-shadow: -10px 0 30px rgba(0,0,0,0.1);
            }
            .nav-links.active { transform: translateX(0); opacity: 1; }
            .nav-links a { font-size: 1.5rem; }
            
            .hero { padding-top: 6rem; min-height: 90vh; }
            .section { padding: 4rem 1.5rem; }
            
            .about-grid { grid-template-columns: 1fr; gap: 2rem; }
            .about-profile-image { width: 180px; height: 180px; }
            
            .work-grid { grid-template-columns: 1fr; }
            
            .tech-icons { gap: 1.5rem; }
            .tech-icon, .text-icon { font-size: 2.5rem; }
            
            .case-study__close-btn { 
                top: 1rem; right: 1rem; 
                padding: 0.5rem 1rem; font-size: 0.8rem;
                background: rgba(255,255,255,0.9); color: #1a1a1a;
            }
            .case-study__content { 
                margin-top: -2rem; 
                padding: 2rem 1.5rem 4rem 1.5rem; 
                border-radius: 20px 20px 0 0;
            }
            .case-study__hero { height: 35vh; }
            .case-study__meta { grid-template-columns: 1fr; gap: 1.5rem; }
        }
        
        @media (max-width: 480px) {
            .hero-title { font-size: 2.5rem; }
            .section-title { font-size: 2rem; margin-bottom: 2rem; }
            .btn, .category-btn { width: 100%; justify-content: center; }
            .work-categories { gap: 0.5rem; }
        }
    </style>
</head>
<body>

    <div class="animated-shapes" id="animatedShapes"></div>
    <div class="scroll-indicator"><div class="scroll-progress"></div></div>

    <main id="main-content">
        <nav id="navbar">
            <div class="nav-container">
                <a href="#home" class="nav-brand">
                    <div class="logo-container">
                        <div class="logo-circle"><span class="logo-text">NS</span></div>
                    </div>
                    <span class="brand-text">Nathanael Setiorahardjo</span>
                </a>
                
                <ul class="nav-links" id="navLinks">
                    <li><a href="#home" class="active">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#work">Projects</a></li>
                    <li><a href="#community">Community</a></li>
                    <li><a href="#tech">Tech Stack</a></li>
                    <li><a href="#socials">Contact</a></li>
                </ul>
    
                <div class="nav-tools">
                    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                        <div class="toggle-switch">
                            <div class="toggle-slider"></div>
                        </div>
                    </button>
                    <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation" aria-expanded="false">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </nav>

        <section class="hero section" id="home">
            <div class="hero-content">
                <h1 class="hero-title ml11">
                    <span class="text-wrapper">
                      <span class="line line1"></span>
                      <span class="letters">Nathanael Setiorahardjo</span>
                    </span>
                </h1>
                <p class="hero-subtitle">
                    <span class="subtitle-line">nathanael.setiorahardjo@gmail.com</span><br>
                    <span class="subtitle-line">Aspiring Software & AI Engineer, Developer, Data Scientist, and</span><br>
                    <span class="subtitle-line">Enthusiastic CS Student</span>
                </p>
            </div>
        </section>

        <section class="about section" id="about">
            <div class="container">
                <h2 class="section-title">About Me</h2>
                <div class="about-grid">
                    <div class="about-image-container">
                        <img src="/assets/ProfilePicture.jpg" alt="Nathanael Setiorahardjo" class="about-profile-image">
                    </div>
                    <div class="about-content-text">
                        <p>Hi, I am an undergraduate Computer Science student at Bina Nusantara University with a passion for software development and data analysis. I am very competitive and regularly compete in tech-related competitions to enhance my skills and knowledge, constantly seeking new challenges to grow as a developer and problem-solver.</p>
                        <p style="margin-top: 1rem;">My journey involves exploring cutting-edge technologies and applying them to real-world problems. I thrive in dynamic environments where continuous learning and innovation are key.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="work section" id="work">
            <div class="container">
                <h2 class="section-title">My Work</h2>
                <div class="work-categories">
                    <button class="category-btn active" data-filter="all">All Projects</button>
                    <button class="category-btn" data-filter="websites">Websites</button>
                    <button class="category-btn" data-filter="ai-iot">AI & IoT</button>
                </div>
                <div class="work-grid" id="workGrid">
                    </div>
            </div>
        </section>

        <section class="community section" id="community">
            <div class="container">
                <h2 class="section-title">Beyond the Code</h2>
                <div class="community-grid">
                    <div class="community-card">
                        <div class="community-card__icon"><i class="fas fa-music"></i></div>
                        <h3>BDM Chairman</h3>
                        <p>As Elected Chairman of Bersama Dalam Musik (BDM), I approach organization leadership as systems orchestration—managing diverse functional units to achieve synchronous execution. This role sharpens my skills in resource allocation, team work, and leading cross-functional teams toward a unified, high-performance output.</p>
                    </div>
                    <div class="community-card">
                        <div class="community-card__icon"><i class="fas fa-chalkboard-user"></i></div>
                        <h3>Freshmen Partner</h3>
                        <p>Committed to a 1-year program of guiding and teaching 9 Freshmen. I serve as their mentor and guide, helping them navigate the transition into university life and supporting them through their first-year challenges.</p>
                    </div>
                    <div class="community-card">
                        <div class="community-card__icon"><i class="fas fa-bullhorn"></i></div>
                        <h3>Freshmen Leader</h3>
                        <p>A key part of the welcoming team for the incoming freshmen class (Binusian 29). I helped facilitate orientation events, creating a welcoming atmosphere and ensuring a memorable start to their university journey.</p>
                    </div>
                    <div class="community-card">
                        <div class="community-card__icon"><i class="fas fa-language"></i></div>
                        <h3>English Tutor (BNEC)</h3>
                        <p>Committed as an English Tutor for Bina Nusantara English Community preparing students for the TOEFL test, I handle sessions of 7-8 students. It’s a challenging but incredibly fun experience that allows me to give back to the student community.</p>
                    </div>
                    <div class="community-card">
                        <div class="community-card__icon"><i class="fas fa-hand-holding-heart"></i></div>
                        <h3>Social Impact</h3>
                        <p>I actively engage in social work, applying my skills to real-world community challenges. This work grounds my pursuits in a desire to make a tangible, positive impact on society.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="tech-stack section" id="tech">
            <div class="container">
                <h2 class="section-title">My Tech Stack</h2>
                <div class="tech-icons">
                    <i class="fab fa-html5 tech-icon" title="HTML5"></i>
                    <i class="fab fa-css3-alt tech-icon" title="CSS3"></i>
                    <i class="fab fa-js-square tech-icon" title="JavaScript"></i>
                    <i class="fab fa-python tech-icon" title="Python"></i>
                    <i class="fab fa-java tech-icon" title="Java"></i>
                    <span class="text-icon" title="C++">C++</span>
                    <span class="text-icon" title="C">C</span>
                    <i class="fab fa-git-alt tech-icon" title="Git"></i>
                    <i class="fab fa-figma tech-icon" title="Figma"></i>
                    <i class="fas fa-microchip tech-icon" title="IoT / Embedded Systems"></i>
                    <span class="text-icon" title="TensorFlow">TF</span>
                </div>
                <p class="tech-text">And always eager to learn more.</p>
            </div>
        </section>

        <section class="socials section" id="socials">
            <div class="container">
                <h2 class="section-title">Connect With Me</h2>
                <div class="social-buttons">
                    <a href="https://www.linkedin.com/in/nathanael-setiorahardjo/" class="social-btn" target="_blank" rel="noopener noreferrer">
                        <i class="fab fa-linkedin-in social-icon"></i> LinkedIn
                    </a>
                    <a href="https://github.com/NathanaelSetiorahardjo" class="social-btn" target="_blank" rel="noopener noreferrer">
                        <i class="fab fa-github social-icon"></i> GitHub
                    </a>
                    <a href="https://instagram.com/nathanael_setiorahardjo" class="social-btn" target="_blank" rel="noopener noreferrer">
                        <i class="fab fa-instagram social-icon"></i> Instagram
                    </a>
                </div>
                <a href="https://drive.google.com/drive/folders/1ZYalblaNPEMXjckGng6iA2Zt5rVKHp-x?usp=sharing" class="btn" download>
                    <i class="fas fa-download"></i> Download my CV
                </a>
            </div>
        </section>
    
        <footer>
            <div class="container" style="justify-content: center;">
                <p>&copy; 2025 Nathanael Setiorahardjo. Built with passion from South Jakarta.</p>
            </div>
        </footer>
    </main>
    
    <div class="case-study-view" id="caseStudyView">
        <a href="#" class="case-study__close-btn" id="caseStudyCloseBtn">Close</a>
        <div class="case-study__hero" id="caseStudyHero">
            <h1 id="caseStudyTitle"></h1>
        </div>
        <div class="case-study__content">
            <div class="case-study__links" id="caseStudyLinks">
                </div>

            <div class="case-study__meta">
                <div class="case-study__meta-item">
                    <h3>ROLE</h3>
                    <p id="caseStudyRole"></p>
                </div>
                <div class="case-study__meta-item">
                    <h3>TECH STACK</h3>
                    <p id="caseStudyStack"></p>
                </div>
                <div class="case-study__meta-item">
                    <h3>TIMELINE</h3>
                    <p id="caseStudyTimeline"></p>
                </div>
            </div>
            <div class="case-study__section">
                <h2>The Challenge</h2>
                <p id="caseStudyChallenge"></p>
            </div>
            
            <img id="caseStudyImage1" src="" alt="Project detail image" class="case-study__full-image">
            
            <div class="case-study__section">
                <h2>The Solution</h2>
                <p id="caseStudySolution"></p>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const projectData = [
            {
                id: 'gestitalk-2',
                title: 'GestiTalk 2.0 (SSFT)',
                category: 'ai-iot',
                image: '/assets/Social.jpg', 
                description: 'Award-winning AI web app translating full-word BISINDO sign language in real-time.',
                tags: ['AI', 'Web App', 'Python', 'TensorFlow'], 
                mainImage: '/assets/SFT_2.jpg', 
                role: 'Lead AI & Web Developer',
                stack: 'Python, TensorFlow, Web Technologies',
                timeline: 'Feb 2025 - Nov 2025',
                challenge: 'Moving beyond simple letter recognition to interpreting full words and dynamic gestures in real-time was a significant leap. We needed to refine our AI model to handle the complexity of continuous signing and deploy it as an accessible web application.',
                solution: 'We perfected our AI model to recognize word-level BISINDO, shifting from a hardware-dependent prototype to a scalable web application. This evolution allows for broader accessibility and a more natural communication flow. Our efforts secured us 3rd Place in the prestigious Samsung Solve For Tomorrow 2025 competition.',
                image1: '/assets/SFT_1.jpg', 
                repoLink: 'https://github.com/NathanaelSetiorahardjo/KYGB-SFT-GestiTalk',
                demoLink: 'https://gisti-talk-sft-2025.vercel.app/' 
            },
            {
                id: 'portfolio-site',
                title: 'Interactive Portfolio',
                category: 'websites',
                image: '/assets/PortfolioWeb.jpg', 
                description: 'Modern responsive portfolio with smooth animations and dark mode support.',
                tags: ['HTML/CSS', 'JavaScript'],
                mainImage: '/assets/PortfolioWeb.jpg', 
                role: 'Full-Stack Developer',
                stack: 'HTML, CSS, JavaScript',
                timeline: '1 Month (2025)',
                challenge: 'To build a personal portfolio from scratch that was not only visually stunning and interactive but also highly performant and accessible, without relying on heavy frameworks.',
                solution: 'I focused on clean, semantic HTML and advanced CSS for the layout and animations. JavaScript was used for complex interactions, including the theme toggle and project filtering. I implemented lazy loading for images and optimized assets to ensure fast load times.',
                image1: '/assets/PortfolioWeb.jpg', 
                repoLink: 'https://github.com/NathanaelSetiorahardjo/Portofolio-Web-V1',
                demoLink: '#'
            },
            {
                id: 'gestitalk',
                title: 'GestiTalk (SIC 6)',
                category: 'ai-iot',
                image: '/assets/SIC_1.jpg', 
                description: 'Computer vision and IoT solution translating BISINDO sign language for the deaf community.',
                tags: ['Python', 'Computer Vision', 'IoT', 'ESP32'],
                mainImage: '/assets/SIC_1.jpg', 
                role: 'Lead AI & IoT Developer',
                stack: 'Python, Computer Vision, IoT, ESP32-CAM',
                timeline: 'Sep 2024 - Jan 2025 ',
                challenge: 'Integrating the deaf community into workplaces and daily life often faces a communication gap. Our challenge was to build a real-time, portable solution that could translate BISINDO (Indonesian Sign Language) into text or speech, utilizing affordable hardware components.',
                solution: 'We developed "GestiTalk" during the Samsung Innovation Campus 6 program. We built a custom AI model using Python to recognize BISINDO alphabets and integrated it with an ESP32-CAM for real-time image processing. Although we didn\'t make the final 10, we proudly placed in the Top 40 nationwide. The journey taught us that sometimes we win, sometimes we learn.',
                image1: '/assets/SIC_2.jpg', 
                repoLink: 'https://github.com/NathanaelSetiorahardjo/UNI146_KYGE',
                demoLink: 'https://youtu.be/8IQ3sZXoamw?si=y662VnWqy6N5LrBi'
            },
            {
                id: 'gaturu',
                title: 'Gaturu (COMPFEST 17)',
                category: 'ai-iot',
                image: '/assets/Gaturu.jpg', 
                description: 'IoT-based microsleep detection system using MPU-6050 sensors and Machine Learning.',
                tags: ['Python', 'C++', 'IoT', 'Machine Learning'],
                mainImage: '/assets/Gaturu.jpg', 
                role: 'IoT & AI Engineer',
                stack: 'Python (WebSocket), C++ (Arduino), MPU-6050, ESP32',
                timeline: 'August 2025',
                challenge: 'Detecting microsleep in real-time to prevent accidents using affordable hardware sensors.',
                solution: 'Integrated an MPU-6050 sensor with an ESP32 to send data via WebSockets to a Python server running a trained ML model for immediate classification and alert generation.',
                image1: '/assets/Gaturu.jpg', 
                repoLink: 'https://github.com/NathanaelSetiorahardjo/ViYoJen---COMPFEST-17',
                demoLink: 'https://drive.google.com/file/d/15KcYhN6tBpImO8F_5vQW70qn8-rK5MWI/view?usp=sharing'
            },
            {
                id: 'deliveree-redesign',
                title: 'Deliveree Redesign (HCI)',
                category: 'websites',
                image: '/assets/Deliveree_1.jpg', 
                description: 'A user-centered redesign of the Deliveree logistics platform, focusing on streamlined booking and payment flows.',
                tags: ['HTML', 'CSS', 'Figma', 'UI/UX'],
                mainImage: '/assets/Deliveree_2.jpg', 
                role: 'UI/UX Designer & Frontend Developer',
                stack: 'HTML, CSS, Figma',
                timeline: '2nd Semester Project (2024)',
                challenge: 'The goal was to improve the usability of the Deliveree platform by redesigning critical user journeys such as account creation, order placement, and payment processing. We needed to ensure the interface was intuitive and accessible while maintaining brand identity.',
                solution: 'We conducted a heuristic evaluation and redesigned the UI to be more user-friendly. The final high-fidelity prototype was implemented using pure HTML and CSS, featuring responsive layouts for key pages like "Make Order" and "View Services".',
                image1: '/assets/Deliveree_1.jpg', 
                repoLink: 'https://github.com/NathanaelSetiorahardjo/Deliveree_Prototype_Live_Link',
                demoLink: 'https://nathanaelsetiorahardjo.github.io/Deliveree_Prototype_Live_Link/'
            },
            {
                id: 'medcheck',
                title: 'MedCheck (Helia AI)',
                category: 'ai-iot',
                image: '/assets/medcheck_2.jpg', 
                description: 'An AI-powered virtual doctor available 24/7 for preliminary diagnosis and health advice.',
                tags: ['Python', 'AI', 'Vercel'],
                mainImage: '/assets/medcheck.jpg', 
                role: 'Full-Stack Developer',
                stack: 'Python (Flask), HTML, CSS, AI',
                timeline: 'September 2025',
                challenge: 'Medical consultations can be expensive and inaccessible during off-hours. We needed a solution to provide immediate, reliable health guidance to users regardless of time or location.',
                solution: 'We built Helia, a generative AI doctor integrated into a responsive web application. It uses a Python backend to process natural language queries and provide medical context, while the frontend ensures a seamless user experience deployed via Vercel.',
                image1: '/assets/medcheck_2.jpg', 
                repoLink: 'https://github.com/NathanaelSetiorahardjo/med_check_PapiGi',
                demoLink: 'https://med-check-papi-gi.vercel.app/'
            },
            {
                id: 'tubris',
                title: 'TUBRIS (AI Research)',
                category: 'websites',
                image: '/assets/tubris_1.jpg', 
                description: 'Web-based AI research project featuring scanning capabilities and educational resources.',
                tags: ['HTML', 'CSS', 'JavaScript'],
                mainImage: '/assets/tubris_2.jpg', 
                role: 'Frontend Developer',
                stack: 'HTML, CSS, JavaScript, Machine Learning',
                timeline: 'Oct 2025 - present',
                challenge: 'Developing a user-friendly interface for AI-based Tuberculosis early detection within a web environment.',
                solution: 'Created a responsive web platform that combines a machine learning-based Tuberculosis screening system with accessible health education. The system analyzes chest X-ray images using an early-detection, providing users with risk insights while also offering clear and reliable TB information for public awareness.',
                image1: '/assets/tubris_2.jpg', 
                repoLink: 'https://github.com/NathanaelSetiorahardjo/TUBRIS',
                demoLink: 'http://tubris.vercel.app/'
            }
        ];

        let savedScrollPosition = 0; 

        // --- 2. CORE FUNCTIONS (Render & Logic) ---

        const workGrid = document.getElementById('workGrid');
        const caseStudyView = document.getElementById('caseStudyView');
        const mainContent = document.getElementById('main-content');

        const createProjectCard = (project) => {
            const card = document.createElement('div');
            card.className = `work-item`;
            card.dataset.category = project.category;
            card.dataset.projectId = project.id;
            card.innerHTML = `
                <img src="${project.image}" alt="${project.title} screenshot" class="work-image" loading="lazy">
                <div class="work-content">
                    <h3>${project.title}</h3>
                    <p>${project.description}</p>
                    <div class="tech-tags">
                        ${project.tags.map(tag => `<span class="tech-tag">${tag}</span>`).join('')}
                    </div>
                </div>`;
            return card;
        };

        const displayProjects = (filter = 'all') => {
            workGrid.innerHTML = '';
            const filteredProjects = (filter === 'all')
                ? projectData
                : projectData.filter(p => p.category === filter);
            
            filteredProjects.forEach((project, index) => {
                const card = createProjectCard(project);
                card.style.animationDelay = `${index * 100}ms`;
                workGrid.appendChild(card);
            });
        };

        // --- 3. EVENT LISTENERS ---

        displayProjects();

        const filterButtons = document.querySelectorAll('.category-btn');
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                filterButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                displayProjects(button.dataset.filter);
            });
        });

        workGrid.addEventListener('click', (e) => {
            const card = e.target.closest('.work-item');
            if (card) {
                const project = projectData.find(p => p.id === card.dataset.projectId);
                if (project) openCaseStudy(project);
            }
        });

        document.getElementById('caseStudyCloseBtn').addEventListener('click', (e) => {
            e.preventDefault();
            closeCaseStudy();
        });

        // --- 4. CASE STUDY ANIMATION LOGIC ---

        const openCaseStudy = (project) => {
            savedScrollPosition = window.scrollY;

            document.getElementById('caseStudyHero').style.backgroundImage = `url(${project.mainImage})`;
            document.getElementById('caseStudyRole').innerText = project.role;
            document.getElementById('caseStudyStack').innerText = project.stack;
            document.getElementById('caseStudyTimeline').innerText = project.timeline;
            document.getElementById('caseStudyChallenge').innerText = project.challenge;
            document.getElementById('caseStudySolution').innerText = project.solution;
            document.getElementById('caseStudyImage1').src = project.image1;

            const caseStudyTitle = document.getElementById('caseStudyTitle');
            caseStudyTitle.innerHTML = `<span class="letters">${project.title}</span>`;
            const lettersWrapper = caseStudyTitle.querySelector('.letters');
            if(lettersWrapper) {
                lettersWrapper.innerHTML = lettersWrapper.textContent.replace(/([^\x00-\x80]|\w)/g, "<span class='letter'>$&</span>");
            }

            const linksContainer = document.getElementById('caseStudyLinks');
            linksContainer.innerHTML = '';

            if (project.demoLink) {
                const demoBtn = document.createElement('a');
                demoBtn.href = project.demoLink;
                demoBtn.target = "_blank";
                demoBtn.className = "case-study__link demo-link";
                demoBtn.innerHTML = 'Live Demo <i class="fas fa-external-link-alt"></i>';
                linksContainer.appendChild(demoBtn);
            }

            if (project.repoLink) {
                const repoBtn = document.createElement('a');
                repoBtn.href = project.repoLink;
                repoBtn.target = "_blank";
                repoBtn.className = "case-study__link repo-link";
                repoBtn.innerHTML = '<i class="fab fa-github"></i> Repository';
                linksContainer.appendChild(repoBtn);
            }

            const tl = gsap.timeline({ onComplete: () => caseStudyView.scrollTo(0, 0) });
            
            caseStudyView.classList.add('active');
            document.body.classList.add('no-scroll');

            tl.to(mainContent, { autoAlpha: 0, y: -30, duration: 0.5, ease: 'power2.in' })
              .set(mainContent, { display: 'none' })
              .fromTo(caseStudyView, { y: '100vh' }, { y: '0', duration: 0.8, ease: 'power3.out' })
              .fromTo('#caseStudyTitle .letter', { y: 20, opacity: 0 }, { y: 0, opacity: 1, ease: "power2.out", duration: 0.6, stagger: 0.03 }, "-=0.6");
        };

        const closeCaseStudy = () => {
            const tl = gsap.timeline({
                onComplete: () => {
                    caseStudyView.classList.remove('active');
                    document.body.classList.remove('no-scroll');
                    document.getElementById('caseStudyTitle').innerHTML = ''; 
                }
            });
            
            tl.set(mainContent, { display: 'block', y: -30 })
              .call(() => window.scrollTo(0, savedScrollPosition)) 
              .to(caseStudyView, { y: '100vh', duration: 0.8, ease: 'power3.in' })
              .to(mainContent, { autoAlpha: 1, y: 0, duration: 0.5, ease: 'power2.out' }, "-=0.8"); 
        };

        // --- 5. COSMETIC ANIMATIONS ---
        try {
            const titleWrapper = document.querySelector('.ml11 .letters');
            if (titleWrapper) {
                titleWrapper.innerHTML = titleWrapper.textContent.replace(/([^\x00-\x80]|\w)/g, "<span class='letter'>$&</span>");
                
                anime.timeline({loop: false})
                    .add({ targets: '.ml11 .line', scaleY: [0,1], opacity: [0.5,1], easing: "easeOutExpo", duration: 700 })
                    .add({ targets: '.ml11 .line', translateX: [0, titleWrapper.getBoundingClientRect().width + 10], easing: "easeOutExpo", duration: 400 })
                    .add({ targets: '.ml11 .letter', opacity: [0,1], easing: "easeOutExpo", duration: 200, offset: '-=500', delay: (el, i) => 34 * (i+1) })
                    .add({ targets: '.ml11 .line', opacity: 0, duration: 1000, easing: "easeOutExpo", delay: 200 });
            }

            const subtitleLines = document.querySelectorAll('.hero-subtitle .subtitle-line');
            if (subtitleLines.length > 0) {
                subtitleLines.forEach(line => {
                    line.innerHTML = line.textContent.replace(/\S/g, "<span class='letter'>$&</span>");
                });
                anime({
                    targets: '.hero-subtitle .letter', opacity: [0,1], translateY: [20,0],
                    easing: "easeOutExpo", duration: 600, delay: anime.stagger(30), delay: 1500 
                });
            }

            const sectionsToAnimate = document.querySelectorAll('.section-title, .about-image-container, .about-content-text, .community-card, .tech-stack, .socials');
            const animationObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (entry.target.matches('.tech-stack')) {
                            anime({ targets: '.tech-icons .tech-icon, .tech-icons .text-icon, .tech-icons .custom-tech-icon', translateY: [20, 0], scale: [0.8, 1], opacity: [0, 1], easing: 'spring(1, 80, 10, 0)', delay: anime.stagger(80) });
                        } else if (entry.target.matches('.socials')) {
                             anime({ targets: '.social-buttons .social-btn', translateY: [20, 0], opacity: [0, 1], easing: 'easeOutExpo', duration: 800, delay: anime.stagger(100) });
                        } else {
                            entry.target.classList.add('visible');
                        }
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.15 });
            sectionsToAnimate.forEach(el => animationObserver.observe(el));

        } catch (error) {
            console.log("Animation skipped to prevent crash:", error);
        }

        // --- 6. NAV & UTILS ---
        const navbar = document.getElementById('navbar');
        const scrollProgress = document.querySelector('.scroll-progress');
        
        // --- NEW: Select Sections for Scroll Spy ---
        const sections = document.querySelectorAll('section');
        const navLi = document.querySelectorAll('.nav-links a');
        const navLinks = document.getElementById('navLinks');
        
        let lastScrollY = window.scrollY; 

        window.addEventListener('scroll', () => {
            const currentScrollY = window.scrollY;
            
            // 1. Navbar Appearance
            navbar.classList.toggle('scrolled', currentScrollY > 50);

            // 2. Smart Hide/Show (CRITICAL FIX: Don't hide if menu is open!)
            const isMenuOpen = navLinks && navLinks.classList.contains('active');
            
            if (!isMenuOpen && currentScrollY > lastScrollY && currentScrollY > 100) {
                navbar.classList.add('nav-hidden');
            } else {
                navbar.classList.remove('nav-hidden');
            }
            lastScrollY = currentScrollY;

            // 3. Scroll Progress Bar
            const scrollableHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollPercent = (currentScrollY / scrollableHeight) * 100;
            scrollProgress.style.width = `${scrollPercent}%`;

            // 4. Scroll Spy (Active State Logic) - THE FIX
            let current = '';
            sections.forEach((section) => {
                const sectionTop = section.offsetTop;
                // 150px offset accounts for navbar height and visual comfort
                if (currentScrollY >= (sectionTop - 150)) {
                    current = section.getAttribute('id');
                }
            });

            navLi.forEach((li) => {
                li.classList.remove('active');
                if (li.getAttribute('href').includes(current)) {
                    li.classList.add('active');
                }
            });
        });

        const navToggle = document.getElementById('navToggle');
        if (navToggle && navLinks) {
            navToggle.addEventListener('click', () => {
                const isActive = navLinks.classList.toggle('active');
                navToggle.setAttribute('aria-expanded', isActive);
                navToggle.querySelector('i').className = isActive ? 'fas fa-times' : 'fas fa-bars';
                document.body.classList.toggle('no-scroll', isActive);
            });
            navLinks.querySelectorAll('a').forEach(link => link.addEventListener('click', () => {
                navLinks.classList.remove('active');
                navToggle.setAttribute('aria-expanded', false);
                navToggle.querySelector('i').className = 'fas fa-bars';
                document.body.classList.remove('no-scroll');
            }));
        }

        const themeToggle = document.getElementById('themeToggle');
        if (themeToggle) {
            themeToggle.addEventListener('click', () => {
                const newTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
            });
            const currentTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', currentTheme);
        }

        const animatedShapesContainer = document.getElementById('animatedShapes');
        if (animatedShapesContainer) {
            const numShapes = 35;
            const shapes = ['circle', 'square', 'triangle'];
            function getRandom(min, max) { return Math.random() * (max - min) + min; }
            for (let i = 0; i < numShapes; i++) {
                const shape = document.createElement('div');
                const shapeType = shapes[Math.floor(getRandom(0, shapes.length))];
                shape.classList.add('shape', shapeType);
                const size = getRandom(40, 100);
                if (shapeType === 'triangle') {
                    shape.style.borderBottomWidth = `${size}px`;
                    shape.style.borderLeftWidth = `${size / 2}px`;
                    shape.style.borderRightWidth = `${size / 2}px`;
                    shape.style.animationDuration = `${getRandom(12, 22)}s`;
                } else {
                    shape.style.width = `${size}px`;
                    shape.style.height = `${size}px`;
                    shape.style.animationDuration = `${getRandom(10, 20)}s`;
                }
                shape.style.top = `${getRandom(-20, 100)}vh`;
                shape.style.left = `${getRandom(-20, 100)}vw`;
                shape.style.animationDelay = `-${getRandom(0, 20)}s`;
                animatedShapesContainer.appendChild(shape);
            }
        }
    });
    </script>

</body>
</html>